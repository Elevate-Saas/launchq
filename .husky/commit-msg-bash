#!/bin/bash

# Run commitlint
npx --no -- commitlint --edit "$1"

# Check if commitlint failed
if [ $? -ne 0 ]; then
  echo ""
  echo "‚ùå Commit message validation failed!"
  echo ""
  echo "üí° Your commit message should follow this format:"
  echo "   <type>(<scope>): <subject>"
  echo ""
  echo "üìã Valid types:"
  echo "   ‚Ä¢ feat:     A new feature"
  echo "   ‚Ä¢ fix:      A bug fix"
  echo "   ‚Ä¢ docs:     Documentation changes"
  echo "   ‚Ä¢ style:    Code style changes"
  echo "   ‚Ä¢ refactor: Code refactoring"
  echo "   ‚Ä¢ perf:     Performance improvements"
  echo "   ‚Ä¢ test:     Adding or updating tests"
  echo "   ‚Ä¢ chore:    Maintenance tasks"
  echo "   ‚Ä¢ ci:       CI/CD changes"
  echo "   ‚Ä¢ build:    Build system changes"
  echo "   ‚Ä¢ revert:   Reverting previous commits"
  echo ""
  echo "üìñ Examples:"
  echo "   ‚Ä¢ feat: add user authentication"
  echo "   ‚Ä¢ fix: resolve login validation issue"
  echo "   ‚Ä¢ docs: update API documentation"
  echo "   ‚Ä¢ style: format code with prettier"
  echo ""
  echo "üîó Learn more: https://www.conventionalcommits.org/"
  echo ""
  exit 1
fi
